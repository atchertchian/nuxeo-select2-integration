<?xml version="1.0" encoding="UTF-8"?>

<component name="org.nuxeo.select2.layouts.contrib">

  <require>org.nuxeo.ecm.platform.forms.layouts.webapp</require>

  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
    point="layouts">

    <layout name="testSelect2">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml
        </template>
      </templates>
      <rows>
        <row>
          <widget>select2_1</widget>
        </row>
        <row>
          <widget>select2_2</widget>
        </row>
        <row>
          <widget>select2_3</widget>
        </row>
      </rows>

      <widget name="select2_1" type="select2">
        <labels>
          <label mode="any">Simple (source)</label>
        </labels>
        <translated>true</translated>
        <fields>
          <field>dc:source</field>
        </fields>
        <properties mode="any">
          <property name="width">200</property>
          <property name="minimumInputLength">3</property>
          <property name="query">select * from Document where ecm:fulltext LIKE ?</property>
          <property name="documentSchemas">dubincore</property>
        </properties>
      </widget>


      <widget name="select2_2" type="select2">
        <labels>
          <label mode="any">With format (format)</label>
        </labels>
        <translated>true</translated>
        <fields>
          <field>dc:format</field>
        </fields>
        <properties mode="any">
          <property name="width">200</property>
          <property name="minimumInputLength">3</property>
          <property name="query">select * from Document where ecm:fulltext LIKE ?</property>
          <property name="documentSchemas">dublincore,common</property>
          <property name="customFormater">myformater</property>
          <property name="inlinejs"> <![CDATA[
  function myformater(doc) {
   var markup = "<table><tr>";
   markup += "<td><img src='/nuxeo" + doc.properties['common:icon'] + "'/></td>";
   markup += "<td>" + doc.title + " (" + doc.properties['dc:creator'] + ")</td>";
   markup += "</tr></table>";
   return markup;
  }]]></property>
        </properties>
      </widget>

      <widget name="select2_3" type="select2">
        <labels>
          <label mode="any">Custom format + custom id (rights)</label>
        </labels>
        <translated>true</translated>
        <fields>
          <field>dc:rights</field>
        </fields>
        <properties mode="any">
          <property name="width">200</property>
          <property name="minimumInputLength">3</property>
          <property name="query">select * from Document where ecm:fulltext LIKE ?</property>
          <property name="documentSchemas">dublincore,common</property>
          <property name="customFormater">myformater</property>
          <property name="idProperty">dc:creator</property>
        </properties>
      </widget>

    </layout>


  </extension>

</component>
